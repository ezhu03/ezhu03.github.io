<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Eric Zhu â€” Personal Site</title>
  <!-- Inline light theme styles so the file is fully selfâ€‘contained -->
  <style>
    :root{
      --bg:#ffffff; --text:#111111; --muted:#5f6c7b; --accent:#2b6aff; --border:#e8edf2; --card:#f8fafc;
      --maxw: 860px; --shadow: 0 4px 20px rgba(17,17,17,0.06);
    }
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Inter,Helvetica,Arial,sans-serif;line-height:1.6;}
    /* subtle background blobs for a playful vibe */
    body::before{
      content:"";
      position:fixed;
      inset:0;
      z-index:-1;
      pointer-events:none;
      background:
        radial-gradient(600px 600px at -10% -10%, rgba(43,106,255,0.07), transparent 60%),
        radial-gradient(500px 500px at 110% 10%, rgba(255,170,0,0.06), transparent 60%),
        radial-gradient(520px 520px at 30% 120%, rgba(0,200,150,0.05), transparent 60%);
    }
    *{box-sizing:border-box}
    a{color:var(--accent);text-decoration:none}
    a:hover{text-decoration:underline}
    header{position:sticky;top:0;background:rgba(255,255,255,0.8);backdrop-filter:saturate(180%) blur(8px);border-bottom:1px solid var(--border);z-index:10}
    .nav{max-width:var(--maxw);margin:0 auto;display:flex;align-items:center;justify-content:space-between;padding:10px 16px}
    .brand{font-weight:700;letter-spacing:.2px}
    .menu{display:flex;gap:18px;list-style:none;margin:0;padding:0}
    .menu a{padding:6px 8px;border-radius:8px}
    .menu a[aria-current="page"], .menu a:hover{background:var(--card)}

    main{max-width:var(--maxw);margin:28px auto;padding:0 16px}
    section{scroll-margin-top:72px;margin:44px 0;padding:28px;border:1px solid var(--border);border-radius:16px;background:#fff;box-shadow:var(--shadow)}
    h1,h2{line-height:1.25;margin:0 0 12px 0}
    h1{font-size:clamp(26px,3.2vw,34px)}
    h2{font-size:clamp(20px,2.6vw,26px)}
    p{margin:10px 0;color:var(--muted)}
    .lead{font-size:1.05rem;color:#2b3a4a}

    /* Project cards */
    .projects-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:16px}
    .card{border:1px solid var(--border);border-radius:14px;overflow:hidden;background:#fff;box-shadow:var(--shadow)}
    .card img{width:100%;height:180px;object-fit:cover;display:block}
    .card .content{padding:14px}
    .card h3{margin:0 0 6px 0;font-size:18px}
    .card p{margin:0;color:var(--muted)}

    /* Project blocks (auto-wrapped from markdown) */
    #projects .md .project-card{border:1px solid var(--border); border-radius:16px; background:#fff; box-shadow:var(--shadow); padding:14px 16px; margin:14px 0; transition: transform .18s ease, box-shadow .22s ease}
    #projects .md .project-card:hover{transform: translateY(-4px) scale(1.01); box-shadow: 0 12px 30px rgba(17,17,17,.12)}
    #projects .md .project-card:focus-within{outline: 2px solid rgba(43,106,255,.28); outline-offset: 2px}
    #projects .md .project-card img{border-radius:12px;}

    /* Markdown content defaults */
    .md h1{font-size:1.6rem}
    .md h2{font-size:1.35rem}
    .md h3{font-size:1.15rem}
    .md ul{padding-left:1.2rem}
    .md li{margin:6px 0}
    .md img{max-width:100%;height:auto;border-radius:10px;border:1px solid var(--border)}
    .muted{color:var(--muted)}

    footer{max-width:var(--maxw);margin:24px auto 56px;padding:0 16px;color:var(--muted)}

    /* Mobile tweaks */
    @media (max-width: 560px){
      .menu{gap:10px}
      section{padding:22px}
      .card img{height:160px}
    }

    /* ===== Playful styling for About & Projects only (not Resume) ===== */
    /* ===== Resume (uniform professional style) ===== */
    #resume .md{color:#2b3a4a}
    #resume .md h2{margin-top:0}
    #resume .md h3{font-size:1.05rem;margin:14px 0 6px 0;color:#1f2a37}
    #resume .md p{margin:8px 0}
    #resume .md ul{list-style:none;padding-left:1rem;margin:10px 0}
    #resume .md li{position:relative;margin:6px 0;padding-left:.6rem}
    #resume .md li::before{content:"â€¢";position:absolute;left:-.6rem;top:0;color:var(--accent);font-weight:700}
    #resume .md em{color:#3b4a5a}
    #resume .md a{padding:0;border:none;background:transparent}
    .playful .md h1,
    .playful .md h2 { position: relative; display: inline-block }
    .playful .md h1::after,
    .playful .md h2::after{
      content:""; position:absolute; left:4px; right:-6px; bottom:-4px; height:8px;
      background: linear-gradient(90deg, rgba(43,106,255,.25), rgba(43,106,255,.05));
      border-radius:8px; pointer-events:none;
    }
    /* fun prefix for project headings */
    #projects.playful .md h3::before{ content:"âœ¨ "; }

    /* Links become soft pills in playful sections */
    .playful .md a{ display:inline-block; padding:4px 10px; border:1px solid var(--border); border-radius:999px; background:var(--card); text-decoration:none; transition: transform .18s ease, box-shadow .18s ease, background-color .18s ease }
    .playful .md a:hover{ transform: translateY(-1px); box-shadow: var(--shadow); background:#fff; text-decoration:none }

    /* Images: gentle hover lift */
    .playful .md img{ transition: transform .22s ease, box-shadow .22s ease; box-shadow: 0 2px 10px rgba(17,17,17,0.04) }
    .playful .md img:hover{ transform: scale(1.015); box-shadow: 0 10px 26px rgba(17,17,17,0.10) }

    /* List bullets a bit roomier */
    .playful .md li{ margin: 8px 0 }

    /* Respect reduced motion */
    @media (prefers-reduced-motion: reduce){
      .playful .md a, .playful .md img{ transition: none }
    }

    /* Section reveal animation (applied via JS to child nodes) */
    @keyframes floatIn{ from{ opacity:0; transform: translateY(6px) scale(.98) } to{ opacity:1; transform:none } }
    .reveal{ animation: floatIn .5s ease both }
    /* Gradient border & extra rounding for playful sections only */
    section.playful{
      border:1px solid transparent;
      border-radius:20px;
      background:
        linear-gradient(#fff,#fff) padding-box,
        linear-gradient(135deg, rgba(43,106,255,.22), rgba(0,200,150,.18)) border-box;
    }

  /* ===== Mouse interactivity ===== */
  /* Custom cursor: fish shape + ripple wake (desktop only) */
  @media (hover: hover) and (pointer: fine){
    body{cursor:none}
    #cursor{position:fixed;top:0;left:0;width:34px;height:18px;margin:-9px 0 0 -9px;border-radius:22px 24px 24px 22px;background:linear-gradient(90deg, rgba(255,255,255,.85), var(--accent));opacity:.95;mix-blend-mode:multiply;pointer-events:none;z-index:1000;box-shadow:0 4px 18px rgba(43,106,255,.35);transform:translate3d(-100px,-100px,0) rotate(0deg)}
    #cursor::before{content:"";position:absolute;left:-9px;top:50%;width:12px;height:10px;transform:translateY(-50%) rotate(18deg);background:var(--accent);clip-path:polygon(0 50%,100% 0,100% 100%);opacity:.75}
    #cursor::after{content:"";position:absolute;right:4px;top:4px;width:3px;height:3px;background:rgba(17,17,17,.7);border-radius:50%}
    #cursor-ring{position:fixed;top:0;left:0;width:38px;height:38px;margin:-19px 0 0 -19px;border-radius:50%;border:2px solid rgba(43,106,255,.35);background:transparent;pointer-events:none;z-index:999;mix-blend-mode:multiply;opacity:.65;transform:translate3d(-100px,-100px,0)}
    #cursor-ring.shrink{transform:translate3d(var(--x, -100px), var(--y, -100px), 0) scale(.85);opacity:.9;border-color:rgba(43,106,255,.6)}
    #wake{position:fixed;inset:0;pointer-events:none;z-index:998}
    .wake-dot{position:absolute;width:var(--w,16px);height:var(--h,16px);border:2px solid rgba(43,106,255,.28);border-radius:50%;transform:translate(-50%,-50%) scale(1);opacity:.85;animation:wake var(--dur,1.8s) cubic-bezier(.17,.67,.22,1) forwards;will-change: transform, opacity}
    @keyframes wake{to{transform:translate(-50%,-50%) scale(var(--scale,4.2));opacity:0}}
    .click-wave{position:absolute;width:var(--w,12px);height:var(--h,12px);border:2px solid rgba(43,106,255,.34);border-radius:50%;transform:translate(-50%,-50%) scale(1);opacity:.9;animation:wave var(--dur,1.8s) ease-out forwards;mix-blend-mode:multiply;will-change: transform, opacity}
    @keyframes wave{to{transform:translate(-50%,-50%) scale(var(--scale,9));opacity:0}}
  }
  /* Spotlight that follows mouse (only on playful sections) */
  #spotlight{position:fixed;inset:0;pointer-events:none;z-index:5;opacity:0;transition:opacity .2s ease}
  #spotlight.on{opacity:.9}

  /* Tilt targets */
  .tilt{will-change: transform; transition: transform .15s ease; transform-style:preserve-3d}
  .tilt:hover{transform: translateZ(0) scale(1.01)}

  /* Ripple effect for links/buttons */
  .ripple{position:absolute;pointer-events:none;border-radius:50%;transform:translate(-50%,-50%);background:rgba(43,106,255,.22);animation:ripple .6s ease-out forwards}
  @keyframes ripple{from{width:0;height:0;opacity:.6} to{width:160px;height:160px;opacity:0}}

  /* Make anchors relatively positioned to contain ripples (playful only) */
  .playful .md a{position:relative;overflow:hidden}
  </style>
</head>
<body>
  <div id="cursor" aria-hidden="true"></div>
  <div id="cursor-ring" aria-hidden="true"></div>
  <div id="wake" aria-hidden="true"></div>
  <div id="spotlight" aria-hidden="true"></div>
  <header>
    <div class="nav">
      <div class="brand">Eric Zhu âœ¨</div>
      <ul class="menu" role="navigation">
        <li><a href="#about" data-nav>About ðŸ‘‹</a></li>
        <li><a href="#projects" data-nav>Projects ðŸš€</a></li>
        <li><a href="#resume" data-nav>Resume ðŸ“„</a></li>
      </ul>
    </div>
  </header>

  <main>
    <section id="about" class="playful">
      <div id="about-md" class="md"></div>
      <p class="muted">Edit the <strong>About</strong> section by changing the markdown inside the
        <code>&lt;script type="text/markdown" id="about-src"&gt;</code> block below.</p>
    </section>

    <section id="projects" class="playful">
      <h2>Projects</h2>
      <div id="projects-md" class="md"></div>
      <div class="muted" style="margin-top:8px">Tip: add images with Markdown like <code>![](assets/images/project1.jpg)</code>. Images scale automatically.</div>
    </section>


    <section id="resume">
      <h2>Resume ðŸ“„</h2>
      <div id="resume-md" class="md"></div>
      <p class="muted">You can also link a PDF like <code>[Download PDF](assets/files/Eric_Zhu_Resume.pdf)</code>.</p>
    </section>
  </main>

  <footer>
    Â© <span id="year"></span> Eric Zhu Â· Built with plain HTML + Markdown âœ¨
  </footer>

  <!-- ========================= -->
  <!-- Editable Markdown content -->
  <!-- ========================= -->
<script type="text/markdown" id="about-src">
# Hi, I'm Eric ðŸ‘‹
I'm a USC **M.S. in Computer Science** student and UCSB **B.S. in Physics (CCS, High Honors; minor in Statistics & Data Science, GPA 3.93/4.0)**. I build experimentalâ€“computational pipelines, clean data systems, and physicsâ€‘informed models â€” recently focusing on **larval zebrafish locomotion** and lightweight ML for analytics. I love turning messy measurements into clear, testable insights and polished visuals.

Iâ€™m currently at USC (Viterbi) and previously researched in the **Streichan Lab** at UCSB as a Computational Biophysics Researcher (Deanâ€™s Physics Fellow; Honors Senior Thesis). I also prototype playful tools â€” from **haptics in AR** to **wearables** â€” and run dataâ€‘driven club events.

> *Mission:* build simple systems that stay fast, reproducible, and useful â€” from lab pipelines to data apps.
Beyond school, I serve with **Acts2Fellowship** in Santa Barbara (President; Lead Audio) and, now in Los Angeles, stay plugged into **Generations LA** helping with mentoring and music/AV.
  </script>

  <script type="text/markdown" id="projects-src">
### Strategy to Discover the Onset of Visual Cues in Larval Zebrafish
![Experimental arenas or trajectories placeholder](assets/images/zfish_visual_onset.jpg)
Developed a CRISPR/Cas9 **TYR knockout** line to create blind controls and analyzed how **visual cues** shape locomotion across **7/14/21 dpf**. Designed comparative experiments (blind vs. sighted), ran idtracker.ai pipelines, and wrote a ~50â€‘page thesis tying modeling to experiments.  
**Highlights:** CRISPR/Cas9; experimental design; tracking & kinematics; Python analytics.  
**Links:** [Repo](https://github.com/ezhu03/Zebrafish-Modeling)

### Influence of Perceived Geometry in Zebrafish Group Behavior Patterns
![Sim vs. tank boundary tests placeholder](assets/images/zfish_geometry.jpg)
Built a dataâ€‘acquisition rig; tested behavior under **varying boundary conditions** in a circular tank; and implemented a **Vicsekâ€‘inspired Markov model** to probe boundary interactions. Presented at UCSBâ€™s Research & Creative Activities Conference (>200 attendees).  
**Highlights:** idtracker.ai â†’ Python; Markov/Vicsek modeling; boundary interaction tests; poster presentation.  
**Links:** [Repo](https://github.com/ezhu03/Zebrafish-Modeling)

### Vibrating Ultrasonic Hoodie â€” Assistive Wearable
![Photo or wiring diagram placeholder](assets/images/ultrasonic_hoodie.jpg)
Wearable prototype using **ultrasonic sensors + vibrating motors** to convey spatial info. **Arduino/C++** control; proximityâ€‘triggered feedback patterns; live demo with documented build.  
**Highlights:** Arduino/C++; sensor fusion; rapid prototyping; UX demo.  
**Links:** [Repo](https://github.com/ezhu03/Vibrating-Ultrasonic-Glove)

### Predicting NBA 2K Ratings
![R plots / ratings trends placeholder](assets/images/2k_ratings.jpg)
Built statistical/ML baselines in **R** to predict 2K ratings from historical performance. Analyzed feature importance and stability across seasons; published an **RMarkdown** report.  
**Highlights:** scraping; regression baselines; reporting.  
**Links:** [Demo](https://ezhu03.github.io/Predicting-2K-Ratings/)

### iFeel â€” Vibrotactile AR Object Recognition (iOS)
![ARKit mockup placeholder](assets/images/arkit.jpg)
Swift app using **ARKit** + **Core Haptics** to recognize shapes and return distinct vibrotactile patterns. Evaluated via a short user survey; presented to ~200 attendees.  
**Highlights:** Swift; ARKit; Core Haptics; lightweight user study.  
**Links:** [Repo](https://github.com/ezhu03/iFeel-Haptics)
  </script>


  <script type="text/markdown" id="resume-src">
**Education**
- **University of Southern California (USC)** â€” M.S. Computer Science *(Aug 2025â€“May 2027)*
- **UC Santa Barbara (CCS)** â€” B.S. Physics *(High Honors; Minor in Statistics & Data Science; GPA 3.93/4.0)*

**Experience**
- **Computational Biophysics Researcher â€” Streichan Lab** *(Mar 2022â€“Jun 2025)*
  - Built Python pipelines for **largeâ€‘scale zebrafish tracking data** (trajectory extraction, velocity/spatial analysis, stats).
  - Automated **microscope/camera** workflows with Python + **PycroManager** to increase imaging throughput.
  - Applied **MLâ€‘based tracking** (idtracker.ai) and validated **physicsâ€‘informed models** (Markov, Brownian, probabilistic turning, reflectionâ€‘guided) against experiments.
  - Produced publicationâ€‘ready figures & reports; collaborated closely with faculty and graduate students.
  - *Recognition:* **Deanâ€™s Physics Fellow (2023)**; **Honors Senior Thesis (2024â€“2025)**.

- **Student Researcher â€” Research Mentorship Program** *(Jun 2020â€“Aug 2020)*
  - Prototyped a Swift **ARKit** app delivering **haptic feedback** for object recognition.
  - Ran a small user survey and presented a 15â€‘minute talk to ~200 attendees.

**Leadership & Service**
- **President, Acts2Fellowship** *(Jun 2023â€“Present)* â€” Led programming for **100+** members; organized Welcome Week reaching **1,000+** participants; mentored student leaders; emceed for **200+** attendees.
- **Lead Audio Engineer** *(Jun 2022â€“Present)* â€” Coordinated live audio for events (60â€“300+ ppl); trained 5 new members weekly; maintained consistent sound quality.

**Outreach & Mentorship**
- Anchor Youth Ministry â€” **STEAM Camp Counselor / TA** *(Summer 2024, 2025)*
- Lompoc Unified School District â€” **Physics Outreach Instructor Aide** *(2022â€“Present)*
- Acts2Fellowship â€” **Gauchoback 1â€‘onâ€‘1 Mentor** *(2023â€“Present)*
- Friends of Children with Special Needs â€” **Lead CS Instructor** *(2016â€“2021)*

**Honors & Awards**
- Deanâ€™s Physics Fellow (Summer Undergraduate Research Fellowship, 2023)
- College of Creative Studies Honors (2021â€“2025)

**Skills**
- **Languages/Tools:** Python, Java, C/C++, R, MATLAB, SQL, Swift, HTML/CSS, LaTeX, Git/GitHub, Jupyter, Linux/Unix
- **Data/ML:** NumPy, Pandas, Matplotlib, Seaborn, scikitâ€‘learn, TensorFlow/PyTorch, Neural Networks
- **Methods:** Experimental design, image processing, tracking, statistical modeling, simulations, dashboards

**Links**  
[LinkedIn](https://www.linkedin.com/in/ezhu03/) Â· [GitHub](https://github.com/ezhu03) Â· [Email](mailto:ejzhu@usc.edu) Â· [Resume PDF](assets/files/Eric_Zhu_Resume.pdf) Â· [CV PDF](assets/files/Eric_Zhu_CV.pdf)
  </script>

  <!-- Lightweight Markdown parser (headings, bold/italic, links, images, lists, code) -->
  <script>
    (function(){
      const esc = s => s.replace(/[&<>]/g,m=>({"&":"&amp;","<":"&lt;",">":"&gt;"}[m]));
      function md(md){
        // code blocks (triple backticks)
        md = md.replace(/```([\s\S]*?)```/g, (_,c)=>`<pre><code>${esc(c)}</code></pre>`);
        // inline code
        md = md.replace(/`([^`]+)`/g,'<code>$1</code>');
        // images ![alt](src)
        md = md.replace(/!\[([^\]]*)\]\(([^\)]+)\)/g,'<img alt="$1" src="$2" />');
        // links [text](url)
        md = md.replace(/\[([^\]]+)\]\(([^\)]+)\)/g,'<a href="$2">$1</a>');
        // headings ###, ##, # (support up to h3 for brevity)
        md = md.replace(/^###\s+(.+)$/gm,'<h3>$1</h3>')
               .replace(/^##\s+(.+)$/gm,'<h2>$1</h2>')
               .replace(/^#\s+(.+)$/gm,'<h1>$1</h1>');
        // bold/italic
        md = md.replace(/\*\*([^*]+)\*\*/g,'<strong>$1</strong>')
               .replace(/\*([^*]+)\*/g,'<em>$1</em>');
        // unordered lists
        md = md.replace(/^(?:-\s+.*(?:\n|$))+?/gm, block => {
          const items = block.trim().split(/\n/).map(l=>l.replace(/^-\s+/,'').trim()).filter(Boolean);
          return `<ul>` + items.map(i=>`<li>${i}</li>`).join('') + `</ul>`;
        });
        // paragraphs
        md = md.split(/\n{2,}/).map(p=>/^\s*<\/?(h\d|ul|pre|img|p|blockquote|div|code)/.test(p.trim())?p:`<p>${p.replace(/\n/g,'<br>')}</p>`).join('\n');
        return md;
      }
      function render(srcId, targetId){
        const src = document.getElementById(srcId);
        const target = document.getElementById(targetId);
        if(src && target){ target.innerHTML = md(src.textContent.trim()); }
      }
      render('about-src','about-md');
      render('projects-src','projects-md');
      // Group each project (H3 + following nodes until next H3) into a rounded card
      (function wrapProjects(){
        const container = document.getElementById('projects-md');
        if(!container) return;
        // prevent double-wrapping
        if(container.querySelector('.project-card')) return;
        const nodes = Array.from(container.childNodes);
        let i=0;
        while(i < nodes.length){
          const n = nodes[i];
          if(n.nodeType===1 && n.tagName==='H3'){
            const card = document.createElement('div');
            card.className = 'project-card';
            card.setAttribute('tabindex','0');
            // move the H3 and subsequent siblings until next H3 into the card
            container.insertBefore(card, n);
            while(i < nodes.length){
              const cur = nodes[i];
              if(cur.nodeType===1 && cur.tagName==='H3' && cur !== n) break;
              card.appendChild(cur);
              nodes.splice(i,1); // remove from list without incrementing i
            }
            // collect content until before the next H3
            while(i < nodes.length){
              const cur = nodes[i];
              if(cur.nodeType===1 && cur.tagName==='H3') break;
              card.appendChild(cur);
              nodes.splice(i,1);
            }
          }else{
            i++;
          }
        }
      })();
      render('resume-src','resume-md');

      // Playful stagger for About & Projects only
      function staggerIn(containerId){
        const el = document.getElementById(containerId);
        if(!el) return;
        const kids = Array.from(el.children);
        let d = 0;
        kids.forEach(k=>{
          k.classList.add('reveal');
          k.style.animationDelay = (d/1000)+'s';
          d += 60; // 60ms increments for a subtle cascade
        });
      }
      staggerIn('about-md');
      staggerIn('projects-md');

      // ===== Mouse interactivity (cursor, spotlight, tilt, ripples) =====
      (function(){
        const reduce = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        const fine = window.matchMedia('(hover:hover) and (pointer:fine)').matches;
        if(!fine) return; // skip on touch devices

        // 1) Fish cursor with eased motion + ripple wake
        const cursor = document.getElementById('cursor');
        const ring = document.getElementById('cursor-ring');
        const wake = document.getElementById('wake');
        // hide the old ring (we'll use wake ripples instead)
        if (ring) ring.style.display = 'none';

        let cx=-100, cy=-100, tx=-100, ty=-100;   // fish position (current/target)
        let lastX=cx, lastY=cy;                   // for angle + ripple spacing
        let rippleDistAcc = 0;                    // accumulate distance for throttling ripples

        function makeRipple(x,y, speed){
          const s = document.createElement('span');
          s.className = 'wake-dot';
          // Physicsâ€‘inspired: larger radius & longer lifetime at higher speed, with damping
          const v = Math.min(speed/18, 1);
          const scale = 4.2 + 2.2*v;         // farther: 4.2..6.4
          const dur   = 1.6 + 0.9*v;         // slower: 1.6s..2.5s
          const size  = 16 + Math.round(12*v);// 16..28 px
          s.style.setProperty('--scale', scale);
          s.style.setProperty('--dur', dur + 's');
          s.style.setProperty('--w', size + 'px');
          s.style.setProperty('--h', size + 'px');
          s.style.left = x + 'px';
          s.style.top  = y + 'px';
          wake.appendChild(s);
          setTimeout(()=> s.remove(), (dur*1000)+300);
        }

        function loop(){
          // ease toward target (slightly springy)
          cx += (tx - cx)*0.22; cy += (ty - cy)*0.22;

          // compute heading based on movement
          const dx = cx - lastX, dy = cy - lastY;
          const speed = Math.hypot(dx,dy);
          const angle = Math.atan2(dy, dx) * 180/Math.PI; // degrees
          cursor.style.transform = `translate3d(${cx}px,${cy}px,0) rotate(${angle}deg)`;

          // Emit even less frequent ripples, traveling farther and living longer
          rippleDistAcc += speed;
          // emitEvery grows from ~38px (slow) to ~66px (fast)
          const emitEvery = 38 + 28*Math.min(speed/18, 1);
          if (rippleDistAcc > emitEvery){
            rippleDistAcc = 0;
            makeRipple(lastX, lastY, speed);
          }

          lastX = cx; lastY = cy;
          requestAnimationFrame(loop);
        }
        window.addEventListener('mousemove', (e)=>{ tx=e.clientX; ty=e.clientY; });
        requestAnimationFrame(loop);

        // Click ripples: damped radial waves using CSS variables
        document.addEventListener('click', (e)=>{
          const x = e.clientX, y = e.clientY;
          // Create 3 waves with increasing scale and duration, like expanding circles with damping
          const waves = [
            {delay: 0,    scale: 9.0,  dur: 2.0},
            {delay: 320,  scale: 12.0, dur: 2.4},
            {delay: 760,  scale: 15.0, dur: 2.8}
          ];
          waves.forEach(w=>{
            setTimeout(()=>{
              const ring = document.createElement('span');
              ring.className = 'click-wave';
              ring.style.left = x + 'px';
              ring.style.top  = y + 'px';
              // Slightly larger starting size when moving faster (adds a momentum feel)
              const v = Math.min(Math.hypot(tx-cx, ty-cy)/18, 1);
              const size = 12 + Math.round(10*v);
              ring.style.setProperty('--w', size + 'px');
              ring.style.setProperty('--h', size + 'px');
              ring.style.setProperty('--scale', w.scale + (0.8*v));
              // Damped waves: longer duration for larger rings
              ring.style.setProperty('--dur', w.dur + 's');
              wake.appendChild(ring);
              setTimeout(()=> ring.remove(), (w.dur*1000)+600);
            }, w.delay);
          });
        }, {passive:true});

        // 2) Spotlight: radial gradient under the cursor that only shows over playful sections
        const spot = document.getElementById('spotlight');
        function setSpot(x,y){
          spot.style.background = `radial-gradient(180px 180px at ${x}px ${y}px, rgba(43,106,255,.10), rgba(0,0,0,0))`;
        }
        document.addEventListener('mousemove', (e)=>{ setSpot(e.clientX, e.clientY); });
        ['about','projects'].forEach(id=>{
          const sec = document.getElementById(id);
          if(!sec) return;
          sec.addEventListener('mouseenter', ()=> spot.classList.add('on'));
          sec.addEventListener('mouseleave', ()=> spot.classList.remove('on'));
        });

        if(reduce) return; // do not add tilt/ripples if reduced motion

        // 3) Tilt effect on images inside playful sections
        function attachTilt(rootId){
          const root = document.getElementById(rootId); if(!root) return;
          root.querySelectorAll('img').forEach(img=>{
            img.classList.add('tilt');
            const bounds = ()=> img.getBoundingClientRect();
            let raf=0;
            function onMove(ev){
              cancelAnimationFrame(raf);
              raf = requestAnimationFrame(()=>{
                const b = bounds();
                const x = (ev.clientX - b.left)/b.width - .5; // -0.5..0.5
                const y = (ev.clientY - b.top)/b.height - .5;
                const rx = (y * -8);
                const ry = (x * 10);
                img.style.transform = `perspective(700px) rotateX(${rx}deg) rotateY(${ry}deg) scale(1.02)`;
              });
            }
            function onLeave(){ img.style.transform = ''; }
            img.addEventListener('mousemove', onMove);
            img.addEventListener('mouseleave', onLeave);
          });
        }
        attachTilt('about-md');
        attachTilt('projects-md');

        // 4) Ripple on clicks for links/buttons in playful sections
        function addRipples(rootId){
          const root = document.getElementById(rootId); if(!root) return;
          root.addEventListener('click', (e)=>{
            const a = e.target.closest('a');
            if(!a || !root.contains(a)) return;
            const r = document.createElement('span');
            r.className = 'ripple';
            const rect = a.getBoundingClientRect();
            r.style.left = (e.clientX - rect.left) + 'px';
            r.style.top = (e.clientY - rect.top) + 'px';
            a.appendChild(r);
            setTimeout(()=> r.remove(), 620);
          });
        }
        addRipples('about-md');
        addRipples('projects-md');
      })();

      // Nav highlighting
      const links = Array.from(document.querySelectorAll('[data-nav]'));
      const setActive = () => {
        const hash = location.hash || '#about';
        links.forEach(a=>a.removeAttribute('aria-current'));
        const active = links.find(a=>a.getAttribute('href')===hash);
        if(active) active.setAttribute('aria-current','page');
      };
      window.addEventListener('hashchange', setActive);
      setActive();

      // year
      document.getElementById('year').textContent = new Date().getFullYear();
    })();
  </script>
</body>
</html>
